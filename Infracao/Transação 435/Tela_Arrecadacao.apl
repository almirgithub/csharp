Application Description: Centura SQLWindows Standard Application Template
	Outline Version - 4.0.28
	Design-time Settings
.data VIEWINFO
0000: 6F00000001000000 FFFF01000D004347 5458566965775374 6174650400010000
0020: 0000000000A50000 002C000000020000 0003000000FFFFFF FFFFFFFFFFF8FFFF
0040: FFE2FFFFFFFFFFFF FF000000007C0200 004D010000010000 0001000000010000
0060: 000F4170706C6963 6174696F6E497465 6D00000000
.enddata
		Outline Window State: Normal
		Outline Window Location and Size
.data VIEWINFO
0000: 6600040003002D00 0000000000000000 0000B71E5D0E0500 1D00FFFF4D61696E
0020: 0000000000000000 0000000000000000 0000003B00010000 00000000000000E9
0040: 1E800A00008600FF FF496E7465726E61 6C2046756E637469 6F6E730000000000
0060: 0000000000000000 0000000000003200 0100000000000000 0000E91E800A0000
0080: DF00FFFF56617269 61626C6573000000 0000000000000000 0000000000000000
00A0: 3000010000000000 00000000F51E100D 0000F400FFFF436C 6173736573000000
00C0: 0000000000000000 0000000000000000
.enddata
.data VIEWSIZE
0000: D000
.enddata
			Left: -0.013"
			Top: 0.0"
			Width:  8.013"
			Height: 4.969"
		Options Box Location
.data VIEWINFO
0000: D4180909B80B1A00
.enddata
.data VIEWSIZE
0000: 0800
.enddata
			Visible? No
			Left: 4.15"
			Top: 1.885"
			Width:  3.8"
			Height: 2.073"
		Class Editor Location
			Visible? No
			Left: 0.575"
			Top: 0.094"
			Width:  5.063"
			Height: 2.719"
		Tool Palette Location
			Visible? No
			Left: 6.388"
			Top: 0.729"
		Fully Qualified External References? Yes
		Reject Multiple Window Instances? No
		Enable Runtime Checks Of External References? Yes
		Use Release 4.0 Scope Rules? No
	Libraries
		File Include: detran_classes.apl
		File Include: vtstr.Apl
		File Include: vttblwin.Apl
		File Include: detran_funcoes.apl
	Global Declarations
		Window Defaults
			Tool Bar
				Display Style? Etched
				Font Name: System Default
				Font Size: System Default
				Font Enhancement: System Default
				Text Color: System Default
				Background Color: System Default
			Form Window
				Display Style? Etched
				Font Name: System Default
				Font Size: System Default
				Font Enhancement: System Default
				Text Color: System Default
				Background Color: System Default
			Dialog Box
				Display Style? Etched
				Font Name: System Default
				Font Size: System Default
				Font Enhancement: System Default
				Text Color: System Default
				Background Color: System Default
			Top Level Table Window
				Font Name: System Default
				Font Size: System Default
				Font Enhancement: System Default
				Text Color: System Default
				Background Color: System Default
			Data Field
				Font Name: Use Parent
				Font Size: Use Parent
				Font Enhancement: Use Parent
				Text Color: Use Parent
				Background Color: Use Parent
			Multiline Field
				Font Name: Use Parent
				Font Size: Use Parent
				Font Enhancement: Use Parent
				Text Color: Use Parent
				Background Color: Use Parent
			Spin Field
				Font Name: Use Parent
				Font Size: Use Parent
				Font Enhancement: Use Parent
				Text Color: Use Parent
				Background Color: Use Parent
			Background Text
				Font Name: Use Parent
				Font Size: Use Parent
				Font Enhancement: Use Parent
				Text Color: Use Parent
				Background Color: Use Parent
			Pushbutton
				Font Name: Use Parent
				Font Size: Use Parent
				Font Enhancement: Use Parent
			Radio Button
				Font Name: Use Parent
				Font Size: Use Parent
				Font Enhancement: Use Parent
				Text Color: Use Parent
				Background Color: Use Parent
			Check Box
				Font Name: Use Parent
				Font Size: Use Parent
				Font Enhancement: Use Parent
				Text Color: Use Parent
				Background Color: Use Parent
			Option Button
				Font Name: Use Parent
				Font Size: Use Parent
				Font Enhancement: Use Parent
			Group Box
				Font Name: Use Parent
				Font Size: Use Parent
				Font Enhancement: Use Parent
				Text Color: Use Parent
				Background Color: Use Parent
			Child Table Window
				Font Name: Use Parent
				Font Size: Use Parent
				Font Enhancement: Use Parent
				Text Color: Use Parent
				Background Color: Use Parent
			List Box
				Font Name: Use Parent
				Font Size: Use Parent
				Font Enhancement: Use Parent
				Text Color: Use Parent
				Background Color: Use Parent
			Combo Box
				Font Name: Use Parent
				Font Size: Use Parent
				Font Enhancement: Use Parent
				Text Color: Use Parent
				Background Color: Use Parent
			Line
				Line Color: Use Parent
			Frame
				Border Color: Use Parent
				Background Color: Use Parent
			Picture
				Border Color: Use Parent
				Background Color: Use Parent
		Formats
			Number: 0'%'
			Number: #0
			Number: ###000
			Number: ###000;'($'###000')'
			Date/Time: hh:mm:ss AMPM
			Date/Time: M/d/yy
			Date/Time: MM-dd-yy
			Date/Time: dd-MMM-yyyy
			Date/Time: MMM d, yyyy
			Date/Time: MMM d, yyyy hh:mm AMPM
			Date/Time: MMMM d, yyyy hh:mm AMPM
		External Functions
		Constants
.data CCDATA
0000: 3000000000000000 0000000000000000 00000000
.enddata
.data CCSIZE
0000: 1400
.enddata
			System
			User
				Number: BAMERINDUS		= 399
				Number: BANDEPE		= 24
				Number: BB			= 001
				Number: BRADESCO		= 237
				Number: CEF			= 104
				Number: ITAU			= 341
			Enumerations
		Resources
		Variables
.data RESOURCE 0 0 1 1846580000
0000: 2200000013000000 0000000000000000 020000010000001C 020000D019000000
0020: 01FE00FF03
.enddata
			Window Handle: hWndAvulsoHeader
			Window Handle: hWndBandepeHeader
			Window Handle: hWndDetalheBandepe
			Window Handle: hWndDetalhe1
			Window Handle: hWndDetalhe104
			Window Handle: hWndDetalheAV1
			Window Handle: hWndDetalheAV104
			Window Handle: hWndRelBaixaSeguro
			Window Handle: hWndRemessaDetalhe
			Window Handle: hWndReemitir
			Window Handle: hWndRelRetorno
			Window Handle: hWndRemessa
			Window Handle: hWndRetorno
			Window Handle: hWndRelInf
			Window Handle: hWndRetornoDetalhe
			Window Handle: hWndRetornoHeader
			Window Handle: hWndRetornoTrailer
			Window Handle: hWndFEBRABANHeader
			! Window Handle: hWndDetalheFEB
			Window Handle: hWndFEB2000Header
			Window Handle: hWndDetalhe255
			! String: sGlobalSecretaria
			! String: sGlobalDetran
			! Number: nSeqTransacaoRENAINF
			! Number: nCodConsultaRENAINF
			!
			Number: nAux
			String: sDiretorioRel
		Internal Functions
			!
			! Function: DivideColPor100
				Description: Divide o conteúdo da coluna por 100.
				Returns 
				Parameters 
					Receive Window Handle: hWndTabela
					Receive Window Handle: hWndColuna
				Static Variables 
				Local variables 
					Number: nAux
					String: sAux
				Actions 
					! Autor
						  Celso 1/11/95
					Call SalTblGetColumnText( hWndTabela, SalTblQueryColumnID( hWndColuna), sAux )
					Set nAux = SalStrToNumber( sAux) / 100
					Call SalTblSetColumnText( hWndTabela, SalTblQueryColumnID( hWndColuna), SalNumberToStrX( nAux , 2 ) )
			! Function: NomeArquivo
				Description: Retorna o nome do arquivo dentro de uma string que contém o path e o nome do mesmo.
				Returns 
					String: 
				Parameters 
					Long String: lsCaminho
				Static Variables 
				Local variables 
				Actions 
					! Observacoes
						  Autor
							  Celso 1/11/95
					If VisStrScanReverse( lsCaminho, -1, '\\' ) = -1
						Return lsCaminho
					Return SalStrMidX( lsCaminho, VisStrScanReverse( lsCaminho, -1, '\\' ) +1 , 20 )
			! Function: NomeDiretorio
				Description: Retorna o diretorio do arquivo dentro de uma string que contém o path e o nome do arquivo.
				Returns 
					String: 
				Parameters 
					Long String: lsCaminho
				Static Variables 
				Local variables 
				Actions 
					! Observacoes
						  Autor
							  Celso 1/11/95
					If VisStrScanReverse( lsCaminho, -1, '\\' ) = -1
						Return ''
					Return SalStrLeftX( lsCaminho, VisStrScanReverse( lsCaminho, -1, '\\' )  + 1)
			! Function: ProcuraDJaDigitado
				Description: Procura uma data numa tabela, verificando se o mesmo já existe (deletando a linha digitada).
				Returns 
					Boolean: 
				Parameters 
					Receive Window Handle: hWndTabela
					Number: nColumnID
					Number: nLinhaDigitada
					Date/Time: dCodigoDigitado
					String: sMensagem
				Static Variables 
				Local variables 
					Number: nLinha
					String: sCol
				Actions 
					! Observações
						  Retorna TRUE se encontrou o código e foi deletado a Linha.
						  Autor
							  Celso - 02/01/96
						  O Código em comentário é o código escrito antigamente.
						! Antigamente....
							! Verifica se existe linha com Código do Título igual ao recém digitado.
								  nColumnID	- Contém o Número do ColumnID da coluna colnTitulo.
								  nLinha 	   	- Contém o número das linhas atuais em que se está fazendo a pesquisa.
								  sCodigoDigitado  	- Código do Tipo de Venda que foi recém digitado.
								  sCol 	   	- Usado para quardar temporariamente os códigos já existentes.
							! Set nLinha = TBL_MinRow
							! Set nColumnID = SalTblQueryColumnID( tblTitulosBordero.colnTitulo )
							! Call SalTblGetColumnText( tblTitulosBordero, nColumnID, sCodigoDigitado )
							! While SalTblFindNextRow( tblTitulosBordero, nLinha, 0, 0)
								  Call SalTblSetContext( tblTitulosBordero, nLinha )
								  Call SalTblGetColumnText( tblTitulosBordero, nColumnID, sCol)
								  If (SalStrToNumber( sCol ) = SalStrToNumber( sCodigoDigitado)) AND (nLinha != lParam)
									! Seta  focus na linha com a coluna do mesmo Código de Tipo de Venda.
									  Call SalMessageBeep( 0 )
									  Call SalMessageBox( 'Título já digitado', 'Atenção', MB_IconExclamation | MB_Ok )
									  Call SalTblDeleteRow( tblTitulosBordero, lParam, TBL_NoAdjust )
									  Set nLinhasInseridas = nLinhasInseridas - 1
									  Return FALSE
					! Verifica se existe linha com Código do Título igual ao recém digitado.
						  nColumnID	- Contém o Número do ColumnID da coluna colnTitulo.
						  nLinha 	   	- Contém o número das linhas atuais em que se está fazendo a pesquisa.
						  sCodigoDigitado  	- Código do Tipo de Venda que foi recém digitado.
						  sCol 	   	- Usado para quardar temporariamente os códigos já existentes.
					Set nLinha = TBL_MinRow
					While SalTblFindNextRow( hWndTabela, nLinha, 0, 0)
						Call SalTblSetContext( hWndTabela, nLinha )
						Call SalTblGetColumnText( hWndTabela, nColumnID, sCol)
						If (SalStrToDate( sCol ) = dCodigoDigitado) AND (nLinha != nLinhaDigitada)
							! Seta  focus na linha com a coluna do mesmo Código de Tipo de Venda.
							Call SalMessageBeep( MB_IconExclamation )
							Call SalMessageBox( sMensagem, 'Atenção', MB_IconExclamation | MB_Ok )
							Call SalTblDeleteRow( hWndTabela, nLinhaDigitada, TBL_NoAdjust )
							Return TRUE
					Call SalTblSetContext( hWndTabela, nLinhaDigitada )
					Return FALSE
			! Function: TransfereTableParaList
				Description: Transfere dados de uma tabela para um List Box
				Returns 
				Parameters 
					Window Handle: hWndTabela
					Number: nLinha
					Window Handle: hWndColuna[ 0:*]
					Receive Window Handle: hWndListBox
				Static Variables 
				Local variables 
					Boolean: bTransfereUmaLinha
					Number: nIndice
					String: sConteudo
					String: sTexto
				Actions 
					! Observações
						  O último registro do array hWndColuna deve conter hWndNULL.
						  Parameters
							  hWndTabela	- Window handle da tabela que contêm os dados originais.
							  nLinha		- Número da Linha para se fazer a transferência ou 65520 para incluir colunas de todas as linhas.
							  hWndColunas	- Window handle's das colunas de onde provêm os dados.
							  hWndListBox	- ListBox 'Destino'.
						  Autor
							  Celso - 18/10/95
					! Set bTransfereUmaLinha = nLinha != 65520
					! If bTransfereUmaLinha
						  Set nLinha = nLinha - 1
					! Else
						  Set nLinha = TBL_MinRow
					! While SalTblFindNextRow( hWndTabela, nLinha, 0, 0 )
						  Set nIndice = 0
						  Call SalTblSetContext( hWndTabela, nLinha )
						  While hWndColuna [nIndice] != hWndNULL
							  Set sTexto = VisTblGetColumnTitle( hWndColuna[nIndice] )
							  Call SalTblGetColumnText( hWndTabela, SalTblQueryColumnID( hWndColuna[nIndice] ), sConteudo )
							! Call SalListAdd( hWndListBox, sTexto || '	:'  || sConteudo)
							  If sTexto  != ''
								  If SalStrLength( sTexto) > 7
									  Call SalListInsert( hWndListBox, -1, sTexto || ':'  || sConteudo)
								  Else
									  Call SalListInsert( hWndListBox, -1, sTexto || '	:'  || sConteudo)
							  Set nIndice = nIndice + 1
						  Call SalListInsert( hWndListBox, -1, '')
						  If bTransfereUmaLinha
							  Break
					Return TRUE
			! Function: TransfereLStrToTable
				Description: Coloca a String nas colunas de acordo com o tamanho das mesmas.
				Returns 
				Parameters 
					Long String: lsString
					Receive Window Handle: hWndTabela
				Static Variables 
				Local variables 
					Window Handle: hWndColuna
					Number: nTamanhoCol
					Number: nLinha
					Number: nSoma
					String: sColuna
				Actions 
					! Observações
						  Local variables
							  nLinha		- Número da Nova Linha.
							  nTamanhoCol	- Tamanho da Coluna atual.
							  nSoma		- Soma de Todas as colunas lidas até o momento.
							  sColuna		- Valor da coluna atual.
						  Autor
							  Celso 1/11/95
					Set nLinha = SalSendMsg( hWndTabela, MSG_NovaLinha, 0, 0 )
					Set hWndColuna =  SalGetFirstChild( hWndTabela, TYPE_TableColumn )
					If hWndColuna = hWndNULL
						Return FALSE
					Set nSoma = 0
					While hWndColuna != hWndNULL
						Call SalTblSetContext( hWndTabela, nLinha )
						! Call SalTblQueryColumnWidth( hWndColuna, nTamanhoCol )
						Set nTamanhoCol = SalGetMaxDataLength( hWndColuna )
						If nTamanhoCol > 0
							Set sColuna = SalStrMidX( lsString, nSoma, nTamanhoCol )
							! Set sColuna = SalStrTrimX( SalStrMidX( lsString, nSoma, nTamanhoCol ))
							Set nSoma = nSoma + nTamanhoCol
							Call SalTblSetColumnText( hWndTabela, SalTblQueryColumnID( hWndColuna ), sColuna )
							If nTamanhoCol > 6
								Call VisTblAutoSizeColumn( hWndTabela, hWndColuna )
						Set hWndColuna = SalGetNextChild( hWndColuna, TYPE_TableColumn )
					Return nLinha
			! Function: fTransmiteRENAINF
				Description: 
				Returns 
				Parameters 
					String: sSerie
					Number: nOrgaoAutuante
					Number: nAuto
					Number: nInfracao
					Number: nTransacao
					String: sTipoRegistroTransacao
					Sql Handle: phSqlApp
					String: sNumAutoInfracao
					String: sPlaca
					String: sCond
					String: sMotivoCancelamento
					Number: nTipoOcorrencia
					Number: nTipoLancamento
					String: sOrigemOcorrencia
					Number: nAgenteFinanceiro
				Static Variables 
				Local variables 
					Number: nLinha
					Long String: lsMensagem
					Long String: lsMensagem2
					Number: nSeqTransacao
					Number: nCodConsulta
					String: sMensagem
					Number: nRetorno
					Number: nCodRetorno
				Actions 
					If fMPSPrepareProc( phSqlApp, 'exec dbinfracao..RNFTransmiteAuto @Serie = :sSerie,
							@CodigoOrgaoAut =:nOrgaoAutuante, @Auto =:nAuto,
							@Infracao = :nInfracao,
							@CodConsulta = :nTransacao,
							@TipoRegistroTransacao=:sTipoRegistroTransacao,
							@NumAutoInfracao = :sNumAutoInfracao,
							@Placa=:sPlaca,@Condicionalidade=:sCond,
							@MotivoCancelamento=:sMotivoCancelamento,
							@TipoOcorrencia=:nTipoOcorrencia,
							@TipoLancamento=:nTipoLancamento,
							@OrigemOcorrencia=:sOrigemOcorrencia,
							@nIndAgenteFinanc = :nAgenteFinanceiro',
							':lsMensagem,:lsMensagem2' )
						! Call SqlExecute( hSqlApp )
					!
					If NOT SqlExecute( phSqlApp )
						! Call fMPSDisconnect( phSqlApp )
						Return FALSE
					Call SqlFetchNext( phSqlApp, nRetorno )
					If nRetorno != FETCH_Ok
						Call fMPSDisconnect( phSqlApp )
						Return FALSE
					Set lsMensagem = lsMensagem || lsMensagem2
					Set nCodConsulta = SalStrToNumber( SalStrMidX( lsMensagem, 6, 3) )
					Set nSeqTransacao = SalStrToNumber( SalStrLeftX( lsMensagem, 6  ) )
					Set nSeqTransacaoRENAINF = nSeqTransacao
					Set nCodConsultaRENAINF = nCodConsulta
					Call fMPSDisconnect( phSqlApp )
					! Call SqlGetResultSetCount( hSqlApp, nRetorno )
					!
					If NOT FuncaoHelpCom( lsMensagem )
						Call fMPSDisconnect( phSqlApp )
						Return FALSE
					Set nLinha = nLinha + 1
							
					! PAREI AQUI
					Call fMPSConnect( phSqlApp )
					If fMPSPrepareProc( phSqlApp, 'exec dbinfracao..RNFTrataRetorno @CodTransacao = :nCodConsulta,
							@NumSeqTransacao =:nSeqTransacao,@CodigoOrgaoAut=:nOrgaoAutuante,
							@nAuto = :nAuto,@Serie=:sSerie,@TipoOcorrencia=:nTipoOcorrencia,
							@TipoLancamento=:nTipoLancamento,
							@OrigemOcorrencia=:sOrigemOcorrencia', ':nCodRetorno' )
						! Call SqlExecute( hSqlApp )
					If NOT SqlExecute( phSqlApp )
						! Call fMPSDisconnect( hSqlApp )
						Return FALSE
					Call SqlFetchNext( phSqlApp, nRetorno )
					! Set tblReenvioRENAINF.colsMensagem= sMensagem
					! Call fMPSDisconnect( hSqlApp )
		Named Menus
		Class Definitions
.data RESOURCE 0 0 1 1064965990
0000: 3C0300008E010000 0000000000000000 0200000300FFFF01 00160000436C6173
0020: 73566172004F7574 6C696E6552006567 496E666FC2003C00 000A630051434B31
0040: 47657261006C0202 00001100001E0004 0000CA00030000FF 7F04830019000000
0060: F001000000FF1F1D 0000AC00190001FD 00FF073600000019 6B000100FFFFC14F
0080: 00000019DA000100 FF7F68B000000004 00F4020000FF1F6C 0000AC00040002FD
00A0: 00FF077000000004 6B000200FFFFC174 00000004DA000200 FF7F78B000000004
00C0: 00F60200FF1F7C00 00AC00040002FD00 FF17800000046B00 0200FFFFC1840000
00E0: 0004DA000200FF7F 88B00000000400F6 0200FF1F8C0000AC 00190001FD00FF07
0100: A5000000196B0001 00FFFFC1BE000000 04DA000200FF7F01 80803E0000000100
0120: 70000E635143406F 6E7461696E7200AA 000000050000006F 0400E801020000FF
0140: C18001000000BF04 190019000101FA00 007F80F20100000F 0800000096190001
0160: 00FE00FF83210000 0004B5000200FFFF 60250000001900ED 0100FF3F01806404
0180: 00000200780D6351 680065636B426F78 2200D00000010000 5B040002FB00FF0F
.enddata
		Default Classes
			MDI Window: cBaseMDI
			Form Window:
			Dialog Box:
			Table Window:
			Quest Window:
			Data Field:
			Spin Field:
			Multiline Field:
			Pushbutton:
			Radio Button:
			Option Button:
			Check Box:
			Child Table:
			Quest Child Window: cQuickDatabase
			List Box:
			Combo Box:
			Picture:
			Vertical Scroll Bar:
			Horizontal Scroll Bar:
			Column:
			Background Text:
			Group Box:
			Line:
			Frame:
			Custom Control:
			ActiveX:
		Application Actions
  